<app-navbar></app-navbar>
<div class="wrap">
  <div class="toolbar">
    <h2 class="title">Admin Dashboard</h2>
  </div>

  <div class="tabs-grid" role="tablist" aria-label="Sections">
    <button
      class="tablink"
      [class.active]="activeTab==='seasons'"
      role="tab"
      [attr.aria-selected]="activeTab==='seasons'"
      (click)="activeTab='seasons'">
      Seasons
    </button>

    <button
      class="tablink"
      [class.active]="activeTab==='users'"
      role="tab"
      [attr.aria-selected]="activeTab==='users'"
      (click)="activeTab='users'">
      Users
    </button>

    <button
      class="tablink"
      [class.active]="activeTab==='feedbacks'"
      role="tab"
      [attr.aria-selected]="activeTab==='feedbacks'"
      (click)="activeTab='feedbacks'">
      Feedbacks
    </button>
  </div>

  <section class="card" *ngIf="activeTab==='seasons'" role="tabpanel">
    <div class="section-head">
      <h3 class="card-title">Seasons</h3>
      <button class="btn accent" type="button" (click)="addSeason()">+ Season</button>
    </div>

    <div class="filters">
      <div class="search">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="7"></circle>
          <line x1="16.65" y1="16.65" x2="21" y2="21"></line>
        </svg>
        <input
          class="search-input"
          type="search"
          placeholder="Search seasons by name"
          [(ngModel)]="qSeason"
          (ngModelChange)="applySeasonFilters()"
          aria-label="Search seasons by name">
        <button
          class="clear"
          *ngIf="qSeason"
          (click)="qSeason=''; applySeasonFilters()"
          aria-label="Clear search"
          type="button"></button>
      </div>
    </div>

    <div *ngIf="loadingSeasons" class="skeleton"></div>
    <app-season-list
      *ngIf="!loadingSeasons"
      [seasons]="filteredSeasons"
      (open)="openSeason($event)">
    </app-season-list>
  </section>

  <section class="card" *ngIf="activeTab==='users'" role="tabpanel">
    <div class="section-head">
      <h3 class="card-title">Users</h3>
      <button class="btn accent" type="button" (click)="addUser()">+ User</button>
    </div>

    <app-users-table (open)="openUser($event)"></app-users-table>
  </section>

  <section class="card" *ngIf="activeTab==='feedbacks'" role="tabpanel">
    <div class="section-head">
      <h3 class="card-title">Feedbacks</h3>
    </div>

    <app-feedback-list></app-feedback-list>
  </section>
</div>
