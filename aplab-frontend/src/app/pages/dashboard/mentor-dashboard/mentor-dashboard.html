<app-navbar></app-navbar>
<div class="wrap">
  <div class="toolbar">
    <h2 class="title">Mentor Dashboard</h2>
  </div>

  <div class="tabs-grid" role="tablist" aria-label="Sections">
    <button
      class="tablink"
      [class.active]="activeTab==='mine'"
      role="tab"
      [attr.aria-selected]="activeTab==='mine'"
      (click)="activeTab='mine'">
      My seasons
    </button>

    <button
      class="tablink"
      [class.active]="activeTab==='feedbacks'"
      role="tab"
      [attr.aria-selected]="activeTab==='feedbacks'"
      (click)="activeTab='feedbacks'">
      Feedbacks
    </button>

    <button
      class="tablink"
      [class.active]="activeTab==='others'"
      role="tab"
      [attr.aria-selected]="activeTab==='others'"
      (click)="activeTab='others'">
      Other seasons
    </button>
  </div>

  <ng-container *ngIf="!loading; else loadingTpl">
    <!-- My seasons -->
    <section *ngIf="activeTab==='mine'" role="tabpanel">
      <div class="card">
        <div class="section-head">
          <h3 class="card-title">My current season</h3>
        </div>

        <ng-container *ngIf="ongoing; else noCurrentTpl">
          <app-season-list
            [seasons]="[ongoing!]"
            (open)="openSeason($event)">
          </app-season-list>
        </ng-container>

        <ng-template #noCurrentTpl>
          <p class="muted">No current season.</p>
        </ng-template>
      </div>

      <div class="card">
        <div class="section-head">
          <h3 class="card-title">My previous seasons</h3>
        </div>

        <ng-container *ngIf="myPrevious?.length; else noPrevTpl">
          <app-season-list
            [seasons]="myPrevious"
            (open)="openSeason($event)">
          </app-season-list>
        </ng-container>

        <ng-template #noPrevTpl>
          <p class="muted">No previous seasons.</p>
        </ng-template>
      </div>
    </section>

    <!-- Feedbacks -->
    <section class="card" *ngIf="activeTab==='feedbacks'" role="tabpanel">
      <div class="section-head">
        <h3 class="card-title">Feedbacks</h3>
      </div>

      <app-feedback-list></app-feedback-list>
    </section>

    <!-- Other seasons -->
    <section class="card" *ngIf="activeTab==='others'" role="tabpanel">
      <div class="section-head">
        <h3 class="card-title">Other seasons</h3>
      </div>

      <ng-container *ngIf="others?.length; else noOtherTpl">
        <app-season-list
          [seasons]="others"
          (open)="openOther($event)">
        </app-season-list>
      </ng-container>

      <ng-template #noOtherTpl>
        <p class="muted">No other seasons.</p>
      </ng-template>
    </section>
  </ng-container>

  <ng-template #loadingTpl>
    <div class="skeleton"></div>
  </ng-template>
</div>
